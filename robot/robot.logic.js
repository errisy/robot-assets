"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var robot_util_1=require("robot/robot.util"),Robot=function(){function a(){_classCallCheck(this,a),this.lastIndex=-1,this.cachedCommands=[]}return _createClass(a,[{key:"execute",value:function(c){var d=this;this.cachedCommands.push(c);for(var e;e=this.cachedCommands.find(function(g){return g.index==d.lastIndex+1});){this.cachedCommands.splice(this.cachedCommands.findIndex(function(g){return g.index==d.lastIndex+1}),1),this.lastIndex+=1;var f=this[e.command];f&&f.apply(this,[e.X,e.Y,e.D])}}},{key:"Add",value:function(c){this.X+=c.X,this.Y+=c.Y}},{key:"PLACE",value:function(c,d,e){this.Region.hitTest({X:c,Y:d})&&(this.X=c,this.Y=d,this.D=e)}},{key:"MOVE",value:function(){if(!this.uninitialized){var c=robot_util_1.DirectionUtil.getDirectionVector(this.D);this.Region.hitTest(robot_util_1.DirectionUtil.Sum(this,c))&&this.Add(c)}}},{key:"LEFT",value:function(){this.uninitialized||(this.D=robot_util_1.DirectionUtil.TurnLeft(this.D))}},{key:"RIGHT",value:function(){this.uninitialized||(this.D=robot_util_1.DirectionUtil.TurnRight(this.D))}},{key:"REPORT",value:function(){this.uninitialized||(console.log("should report: ","Output: "+this.X+", "+this.Y+", "+this.D),this.Reporter&&this.Reporter("Output: "+this.X+", "+this.Y+", "+this.D))}},{key:"uninitialized",get:function(){return void 0==this.X||void 0==this.Y||void 0==this.D}},{key:"Status",get:function(){if(this.uninitialized)return"?,?,?";robot_util_1.DirectionUtil.DirectionVectors[this.D];return this.X+","+this.Y+","+this.D}}]),a}();exports.Robot=Robot;var CommandRegEx=/((PLACE)\s+([\-\+]?\d+)\s*\,\s*([\-\+]?\d+)\s*\,\s*(NORTH|SOUTH|WEST|EAST)|MOVE|LEFT|RIGHT|REPORT)/g;